## 5. äº‹ä»¶å¤„ç†

åœ¨æœ¬è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»äº‹ä»¶å¤„ç†çš„æ¦‚å¿µã€‚

æˆ‘ä»¬åœ¨ä¸ŠèŠ‚è¯¾çš„ä»£ç åŸºç¡€ä¸Šï¼Œæ·»åŠ ä¸€ä¸ªä½¿ç”¨`cart`å¼æ ·çš„`div` ï¼Œé‡Œé¢è®°å½•æœ‰å‡ ä»¶å•†å“ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ª{{cart}}çš„å˜é‡ï¼Œä»¥åŠå¢åŠ æ·»åˆ°è´­ç‰©è½¦`button` ã€‚

ğŸ“„**index.html**

```html
<div class="cart">è´­ç‰©è½¦({{ cart }})</div>
...
<button class="button">æ·»åŠ åˆ°è´­ç‰©è½¦</button>
```

ğŸ“„**main.js**

```javascript
data() {
  return {
    cart: 0,
    ...
  }
}
```

------

### 5.1 ç›®æ ‡

æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿå•å‡»`button` å¹¶é€’å¢`cart` çš„å€¼ã€‚

------

### 5.2 ä¾¦å¬äº‹ä»¶

ä¸ºäº†çŸ¥é“æŒ‰é’®ä½•æ—¶è¢«ç‚¹å‡»ï¼Œæˆ‘ä»¬éœ€è¦ä¾¦å¬è¯¥å…ƒç´ ä¸Šçš„äº‹ä»¶ï¼Œç‰¹åˆ«æ˜¯*å•å‡»*äº‹ä»¶ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨å¦ä¸€ä¸ª Vue æŒ‡ä»¤æ¥å®ç°æ­¤ç›®çš„ï¼š`v-on`

ğŸ“„**index.html**

```html
<button class="button" v-on:click="logic to run">æ·»åŠ åˆ°è´­ç‰©è½¦</button>
```

å®Œæ•´ä»£ç ï¼š

```html
<body>
    <div id="app">
        <div class="nav-bar"></div>
        <div class="cart">è´­ç‰©è½¦({{ cart }})</div>
        <div class="display">
            <div class="container">
                <div class="image">
                    <!-- å›¾ç‰‡æ”¾åœ¨è¿™-->
                    <img :src="image">
                </div>
                <div class="info">
                    <h1>{{ imginfo }}</h1>
                    <p v-if="inSlanket > 10">æœ‰è´§</p>
                    <p v-else-if="inSlanket <= 10 && inSlanket > 0">å¿«è¦å–å…‰äº†</p>
                    <p v-else>ç¼ºè´§</p>
                    <ul>
                        <li v-for="detail in details">{{ detail }}</li>
                    </ul>
                    <div v-for="item in items" :key="item.id">{{ item.attrs }}</div>
                    <button class="button" v-on:click="cart += 1">æ·»åŠ åˆ°è´­ç‰©è½¦</button>
                </div>
            </div>
        </div>
    </div>
    <!-- å¯¼å…¥ç¼–å†™çš„javascript -->
    <script src="./main.js"></script>
</body>
```

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å‘Šè¯‰`v-on`è¦ä¾¦å¬çš„äº‹ä»¶ç±»å‹ï¼š`click` ã€‚åœ¨å¼•å·å†…ï¼Œæˆ‘ä»¬æ”¾ç½®äº†è¦åœ¨äº‹ä»¶å‘ç”Ÿæ—¶è¿è¡Œçš„é€»è¾‘ï¼ˆæˆ–æ–¹æ³•åç§°ï¼‰ã€‚

å¦‚æœæˆ‘ä»¬å†™å…¥`v-on:click="cart += 1" `ï¼Œæˆ‘ä»¬å°†åœ¨å‘ç”Ÿç‚¹å‡»äº‹ä»¶æ—¶å°†è´­ç‰©è½¦çš„å€¼é€’å¢ä¸º1 ã€‚

æ¥ç€æ·»åŠ ä¸€ä¸ªç»Ÿè®¡è´­ç‰©æ•°é‡çš„å˜é‡`cart`

ğŸ“„**main.js**

```javascript
const app = Vue.createApp({
    data() {
        return {
            imginfo: 'åŠ åšæ¯›æ¯¯',
            image: './assets/images/blue.png',
            inSlanket: 100,
            details: ['ç¾Šç¾”ç»’', 'åŠ åš', 'ä¿æš–'],
            items: [
                    { id: 001, attrs: 'è“è‰²'},
                    { id: 002, attrs: 'é»„è‰²' }
            ],
            cart:0,
        }
    }
});
const mountedApp = app.mount('#app');
```

æ‰“å¼€ç½‘é¡µç‚¹å‡»æ·»åŠ åˆ°è´­ç‰©è½¦

![image-20220120135511232](./assets/images/image-20220120135511232.png)



------

### 5.3 è§¦å‘æ–¹æ³•

å› ä¸ºé€»è¾‘`cart += 1`éå¸¸ç®€å•ï¼Œæˆ‘ä»¬å¯ä»¥è®©å®ƒåœ¨`button`å…ƒç´ ä¸Šã€‚ä½†é€šå¸¸ï¼Œæˆ‘ä»¬éœ€è¦è§¦å‘æ›´å¤æ‚çš„é€»è¾‘ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªæ–¹æ³•åç§°ï¼Œä»¥ä¾¿åœ¨äº‹ä»¶å‘ç”Ÿæ—¶è§¦å‘ã€‚æ‰€ä»¥ç°åœ¨è®©æˆ‘ä»¬è¿™æ ·åšã€‚

ğŸ“„**index.html**

```html
<button class="button" v-on:click="addToCart">æ·»åŠ åˆ°è´­ç‰©è½¦</button>
```

ç°åœ¨ï¼Œå•å‡»è¯¥æŒ‰é’®æ—¶ï¼Œå°†è¿è¡Œ`addToCart`æ–¹æ³•ã€‚è®©æˆ‘ä»¬å°†è¯¥æ–¹æ³•æ·»åŠ åˆ° Vue åº”ç”¨çš„é€‰é¡¹å¯¹è±¡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `methods` å±æ€§ç»™ Vueå®šä¹‰æ–¹æ³•ï¼Œ`methods` çš„åŸºæœ¬è¯­æ³•ï¼š

æˆ‘ä»¬å…ˆç”¨JavaScriptå†™ä¸€ä¸ª`addToCart`æ–¹æ³•

```javascript
function addToCart() {
    cart += 1;
}
```

æ”¾åˆ°`methods` ä¸­æˆ‘ä»¬çš„å†™æ³•æ¯”è¾ƒç®€å•ï¼Œç›´æ¥å†™`addToCart() {}`å³å¯ï¼Œè¿™é‡Œæ¨èå¤§å®¶å­¦ä¸€ä¸‹ES6çš„è¯­æ³•ã€‚

```javascript
const app = Vue.createApp({
  data() {
    return {
      ...
      cart: 0,
    }
  },
  methods: {
    addToCart() {
      this.cart += 1
    }
  }
})
```

ä¾‹å¦‚æˆ‘ä»¬åœ¨ `addToCart` æ–¹æ³•ä¸­ï¼Œè®¿é—® `cart` å±æ€§ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ `this.ncart` å½¢å¼è®¿é—®ï¼Œå…¶ä¸­ `this` è¡¨ç¤ºçš„å°±æ˜¯Vue å®ä¾‹å¯¹è±¡ã€‚

åœ¨æµè§ˆå™¨ä¸­ï¼Œæˆ‘ä»¬ç°åœ¨åº”è¯¥èƒ½å¤Ÿå•å‡»"**æ·»åŠ åˆ°è´­ç‰©è½¦"**æŒ‰é’®ï¼Œå¹¶çœ‹åˆ°è´­ç‰©è½¦çš„å€¼å¢åŠ 1.

![image-20220120141842211](./assets/images/image-20220120141842211.png)

å®Œæ•´ä»£ç ï¼š

ğŸ“„**index.html**

```html
<body>
    <div id="app">
        <div class="nav-bar"></div>
        <div class="cart">è´­ç‰©è½¦({{ cart }})</div>
        <div class="display">
            <div class="container">
                <div class="image">
                    <!-- å›¾ç‰‡æ”¾åœ¨è¿™-->
                    <img :src="image">
                </div>
                <div class="info">
                    <h1>{{ imginfo }}</h1>
                    <p v-if="inSlanket > 10">æœ‰è´§</p>
                    <p v-else-if="inSlanket <= 10 && inSlanket > 0">å¿«è¦å–å…‰äº†</p>
                    <p v-else>ç¼ºè´§</p>
                    <ul>
                        <li v-for="detail in details">{{ detail }}</li>
                    </ul>
                    <div v-for="item in items" :key="item.id">{{ item.attrs }}</div>
                    <button class="button" v-on:click="addToCart">æ·»åŠ åˆ°è´­ç‰©è½¦</button>
                </div>
            </div>
        </div>
    </div>
    <!-- å¯¼å…¥ç¼–å†™çš„javascript -->
    <script src="./main.js"></script>
</body>
```

ğŸ“„**main.js**

```javascript
const app = Vue.createApp({
    data() {
        return {
            imginfo: 'åŠ åšæ¯›æ¯¯',
            image: './assets/images/blue.png',
            inSlanket: 100,
            details: ['ç¾Šç¾”ç»’', 'åŠ åš', 'ä¿æš–'],
            items: [
                    { id: 001, attrs: 'è“è‰²'},
                    { id: 002, attrs: 'é»„è‰²' }
            ],
            cart:0,
        }
    },
    methods: {
        addToCart() {
        this.cart += 1
        }
    }
});
const mountedApp = app.mount('#app');
```



------

### 5.4 äº†è§£ V-ON

é€šè¿‡æ·»åŠ `v-on`ç›‘å¬`click`äº‹ä»¶ã€‚å½“å‘ç”Ÿå•å‡»æ—¶ï¼Œè¯¥æ–¹æ³•ä¼šè¿è¡Œï¼Œå°±ä¼šè°ƒç”¨`addToCart`æ–¹æ³•ï¼Œæ˜¯æˆ‘ä»¬è´­ç‰©è½¦çš„å€¼ `cart`åŠ 1.

------

### 5.5 v-on çš„ç®€å†™

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `v-on` æŒ‡ä»¤ (é€šå¸¸ç¼©å†™ä¸º `@` ç¬¦å·) æ¥ç›‘å¬ DOM äº‹ä»¶ï¼Œå¹¶åœ¨è§¦å‘äº‹ä»¶æ—¶æ‰§è¡Œä¸€äº› JavaScriptã€‚ç”¨æ³•ä¸º `v-on:click="methodName"` æˆ–ä½¿ç”¨å¿«æ·æ–¹å¼ `@click="methodName"`

ğŸ“„**index.html**

```html
<button class="button" @click="addToCart">æ·»åŠ åˆ°è´­ç‰©è½¦</button>
```

------

### 5.6 é¼ æ ‡æ‚¬åœäº‹ä»¶

ç°åœ¨æˆ‘ä»¬å·²ç»äº†è§£äº†äº‹ä»¶å¤„ç†çš„åŸºç¡€çŸ¥è¯†ï¼Œè®©æˆ‘ä»¬åœ¨ Vue åº”ç”¨ä¸­ä¾¦å¬å¦ä¸€ç§ç±»å‹çš„äº‹ä»¶ã€‚

ç›®å‰ï¼Œæˆ‘ä»¬åœ¨äº§å“è¯¦ç»†ä¿¡æ¯ä¸‹æ–¹æ˜¾ç¤ºå˜ä½“é¢œè‰²"è“è‰²"å’Œ"é»„è‰²"ï¼š

![image-20220120143448188](./assets/images/image-20220120143448188.png)

å¦‚æœæˆ‘ä»¬å°†é¼ æ ‡æ‚¬åœåœ¨"è“è‰²"å’Œ"é»„è‰²"ä¸Šæ—¶ï¼Œåˆ†åˆ«è§¦å‘å›¾åƒæ›´æ–°ä¸ºè“è‰²å’Œé»„è‰²å›¾åƒï¼Œè¿™æ ·ä¼šæ„Ÿè§‰å¾ˆé…·ã€‚è®©æˆ‘ä»¬åœ¨è¿™äº›é¢œè‰²åç§°ä¸Šæ·»åŠ ä¾¦å¬`mouseover`ï¼ˆ"æ‚¬åœ"ï¼‰äº‹ä»¶çš„åŠŸèƒ½ã€‚

ç”±äºæˆ‘ä»¬å¸Œæœ›æ›´æ–°å°†é¼ æ ‡æ‚¬åœåœ¨å˜ä½“é¢œè‰²ä¸Šæ—¶æ˜¾ç¤ºçš„å›¾åƒï¼Œå› æ­¤æˆ‘ä¸º`items`é‡Œæ·»åŠ äº†ä¸€ä¸ªæ–°çš„`image`å±æ€§ã€‚

å¹¶ä¸”å¢åŠ äº†`updateImage`æ–¹æ³•ã€‚

ğŸ“„**main.js**

```javascript
const app = Vue.createApp({
    data() {
        return {
            imginfo: 'åŠ åšæ¯›æ¯¯',
            image: './assets/images/blue.png',
            inSlanket: 100,
            details: ['ç¾Šç¾”ç»’', 'åŠ åš', 'ä¿æš–'],
            items: [
                    { id: 001, attrs: 'è“è‰²', image: './assets/images/blue.png' },
                    { id: 002, attrs: 'é»„è‰²', image: './assets/images/yellow.png'}
            ],
            cart:0,
        }
    },
    methods: {
        addToCart() {
            this.cart += 1
        },
        updateImage(itemImage) {
            this.image = itemImage
        },
    }
});
const mountedApp = app.mount('#app');
```

ç°åœ¨ï¼Œæˆ‘ä»¬åˆ†åˆ«æœ‰äº†è“è‰²å’Œé»„è‰²æ¯›æ¯¯çš„å›¾åƒè·¯å¾„ã€‚æˆ‘ä»¬å·²å‡†å¤‡å¥½ä¸ºåœ¨é¢œè‰²æ˜¾ç¤ºä¸Šæ·»åŠ `mouseover`äº‹ä»¶ä¾¦å¬ã€‚ä¸€ä½†é¼ æ ‡æ‚¬åœåœ¨è“è‰²æˆ–è€…é»„è‰²ä¸Šï¼Œå°±ä½¿ç”¨`updateImage`æ–¹æ³•åŠ¨æ€åˆ‡æ¢æ˜¾ç¤ºå›¾ç‰‡ã€‚

ğŸ“„**index.html**

```html
<div v-for="item in items" :key="item.id" @mouseover="updateImage(item.image)">{{ item.attrs }}</div>
```

å®Œæ•´ä»£ç 

```html
<body>
    <div id="app">
        <div class="nav-bar"></div>
        <div class="cart">è´­ç‰©è½¦({{ cart }})</div>
        <div class="display">
            <div class="container">
                <div class="image">
                    <!-- å›¾ç‰‡æ”¾åœ¨è¿™-->
                    <img :src="image">
                </div>
                <div class="info">
                    <h1>{{ imginfo }}</h1>
                    <p v-if="inSlanket > 10">æœ‰è´§</p>
                    <p v-else-if="inSlanket <= 10 && inSlanket > 0">å¿«è¦å–å…‰äº†</p>
                    <p v-else>ç¼ºè´§</p>
                    <ul>
                        <li v-for="detail in details">{{ detail }}</li>
                    </ul>
                    <div v-for="item in items" :key="item.id" @mouseover="updateImage(item.image)">{{ item.attrs }}</div>
                    <button class="button" v-on:click="addToCart">æ·»åŠ åˆ°è´­ç‰©è½¦</button>
                </div>
            </div>
        </div>
    </div>
    <!-- å¯¼å…¥ç¼–å†™çš„javascript -->
    <script src="./main.js"></script>
</body>
```

å½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæˆ‘ä»¬å°†è§¦å‘è¯¥æ–¹æ³•ï¼Œä¼ å…¥å›¾åƒè·¯å¾„ã€‚ç°åœ¨åœ¨æµè§ˆå™¨ä¸­ï¼Œå½“æˆ‘ä»¬å°†é¼ æ ‡æ‚¬åœåœ¨"è“è‰²"ä¸Šæ—¶ï¼Œæˆ‘ä»¬åº”è¯¥çœ‹åˆ°è“è‰²å›¾åƒã€‚

![image-20220120144241263](./assets/images/image-20220120144241263.png)

å½“æˆ‘ä»¬å°†é¼ æ ‡æ‚¬åœåœ¨"é»„è‰²"ä¸Šæ—¶ï¼Œæˆ‘ä»¬åº”è¯¥çœ‹åˆ°é»„è‰²å›¾åƒã€‚

![image-20220120143448188](./assets/images/image-20220120143448188.png)
